"use strict";(self.webpackChunksapthapadhi=self.webpackChunksapthapadhi||[]).push([[729],{729:(e,s,t)=>{t.r(s),t.d(s,{default:()=>c});var n=t(5043),o=t(3003),r=t(6318);const a=(0,t(5749).io)("https://sapthapadhi.bloomitsolutions.co.in",{withCredentials:!0,reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,randomizationFactor:.5});var i=t(579);const c=e=>{let{toUser:s=76}=e;const t=(0,o.wA)(),{messages:c,status:l,error:d}=(0,o.d4)((e=>e.chat)),[h,p]=(0,n.useState)("");(0,n.useEffect)((()=>{t((0,r.lj)(s)),u()}),[t,s]);const u=()=>{a.on("/fetchMessages/".concat(s),(e=>{console.log(e),t((0,r.tj)(e))})),a.on("error",(e=>{console.error("Socket error:",e)}))};return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{children:["loading"===l&&(0,i.jsx)("p",{children:"Loading messages..."}),"failed"===l&&(0,i.jsx)("p",{children:d}),(0,i.jsx)("div",{children:c.map(((e,s)=>(0,i.jsx)("div",{children:(0,i.jsxs)("p",{children:[e.fromUser,": ",e.message]})},s)))})]}),(0,i.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),h.trim()&&(a.emit("sendMessage",{toUser:s,message:h}),p(""))},children:[(0,i.jsx)("input",{type:"text",value:h,onChange:e=>p(e.target.value)}),(0,i.jsx)("button",{type:"submit",children:"Send"})]})]})}}}]);
//# sourceMappingURL=729.da2f1b77.chunk.js.map